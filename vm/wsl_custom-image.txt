# Visualization
[1] ubuntu-server-16.04-i386.iso
       â†“  (mount di Windows)
[2] filesystem.squashfs
       â†“  (pindah ke WSL lama)
[3] unsquashfs â†’ extracted/
       â†“
[4] tar cf rootfs.tar
       â†“
[5] wsl --import ubuntu16 C:\WSL\ubuntu16 rootfs.tar
       â†“
[6] wsl -d ubuntu16  â†’  masuk ke sistem 32-bit hasil ISO
## ğŸ§© 1. Perbedaan sistem boot ISO vs WSL

### ğŸ’¿ ISO

File `.iso` itu seperti salinan seluruh CD/DVD instalasi Linux, berisi:

- **Kernel Linux** (`vmlinuz`, `initrd.gz`)
- **Installer** (misalnya *Debian Installer* atau *Subiquity* di Ubuntu)
- **File sistem root** (`filesystem.squashfs`) yang isinya seluruh `/bin`, `/etc`, `/usr`, dll.

ISO dirancang untuk **boot lewat BIOS/UEFI**, jadi dia butuh:

- Bootloader (`isolinux` / `grub`)
- Kernel
- Initrd
- Proses instalasi interaktif (menyalin ke disk)

---

### ğŸ§± WSL

**WSL (Windows Subsystem for Linux)** tidak bisa boot seperti CD/DVD, karena:

- Tidak punya BIOS/UEFI emulator  
- Tidak butuh kernel dari ISO â€” kernel disediakan oleh **Windows sendiri** (`wslkernel.sys`)  
- Langsung butuh **root filesystem** (semua folder `/`) dalam bentuk **tarball** (`rootfs.tar`)

Jadi, WSL langsung *menjalankan* Linux dari isi filesystem **tanpa proses instalasi**.  
Makanya, kalau kamu kasih file `.iso`, WSL bingung â€” dia tidak tahu bagian mana yang isinya *root filesystem*.

# Sample diagram mekanisme (bentuk ascii art) pada ubuntu16 32-bit support

+-------------------------------+
|    ISO Image (ubuntu-16.04)   |
|-------------------------------|
| vmlinuz  | initrd.gz          |
| installer files               |
| filesystem.squashfs  â† ğŸ¯     |
+-------------------------------+
                â”‚
                â”‚ (copy ke Windows)
                â–¼
+--------------------------------+
|  Existing WSL (Ubuntu/Debian)  |
|--------------------------------|
| unsquashfs filesystem.squashfs |
| â””â”€â”€ extracted/                 |
|     â”œâ”€â”€ bin/                   |
|     â”œâ”€â”€ etc/                   |
|     â”œâ”€â”€ usr/                   |
|     â””â”€â”€ var/                   |
| tar cf rootfs.tar              |
+--------------------------------+
                â”‚
                â”‚ (import via PowerShell)
                â–¼
+--------------------------------+
|       WSL New Distro           |
|--------------------------------|
| ubuntu16 (instance name)       |
| C:\WSL\ubuntu16\               |
| rootfs extracted here          |
| kernel from Windows (wsl.sys)  |
+--------------------------------+

# Command
# Di WSL lama
sudo apt install squashfs-tools -y
cd /mnt/c/temp/ubuntu16
sudo unsquashfs -f -d extracted filesystem.squashfs
cd extracted
sudo tar --numeric-owner -cf ../rootfs.tar .

# Di Windows PowerShell
mkdir D:\WSL\ubuntu16
wsl --import ubuntu16 D:\WSL\ubuntu16 C:\temp\ubuntu16\rootfs.tar --version 2
