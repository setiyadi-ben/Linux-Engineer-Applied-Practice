# Listen on 443
<VirtualHost *:443>
    ServerName apache2-ubuntux64server-master
    DocumentRoot /var/www/html/
    
    SSLEngine on
    SSLCertificateFile /etc/apache2/ssl/apache-selfsigned.crt
    SSLCertificateKeyFile /etc/apache2/ssl/apache-selfsigned.key

    ProxyPreserveHost On

    # Proxy PHPMyAdmin - direct to root of container
    ProxyPass /phpmyadmin http://l-e-a-p_pma/
    ProxyPassReverse /phpmyadmin http://l-e-a-p_pma/
    RequestHeader set X-Forwarded-Proto "https"
    RequestHeader set X-Forwarded-Port "443"
    RequestHeader set X-Forwarded-For "%{REMOTE_ADDR}s"
    # RewriteEngine On
    # RewriteRule ^/phpmyadmin/(.*)$ http://l-e-a-p_pma/$1 [P,L]

    # <Location /phpmyadmin/>
    # ProxyPassReverse /
    # ProxyHTMLURLMap / /phpmyadmin/
    # # Add these rewrite rules
    # RewriteEngine On
    # RewriteRule ^/phpmyadmin$ /phpmyadmin/ [R]
    # RewriteRule ^/phpmyadmin/(.*)$ /$1 [PT]
    # </Location>

    # Optional: Tomcat default forwarding
    # ProxyPass / http://l-e-a-p_tomcat:8080/
    # ProxyPassReverse / http://l-e-a-p_tomcat:8080/
    # ProxyPass /probe https://l-e-a-p_tomcat:8000/probe
    # ProxyPassReverse /probe https://l-e-a-p_tomcat:8000/probe

    <Proxy *>
        Require all granted
    </Proxy>

    <Location *>
        Require all granted
    </Location>

    # <Directory /var/www/html>
    #     Options Indexes FollowSymLinks
    #     AllowOverride All
    #     Require all granted
    # </Directory>
</VirtualHost>